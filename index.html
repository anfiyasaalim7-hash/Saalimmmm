<!DOCTYPE html>
<html>
<head>
  <title>LiFi Flash Controller</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      background: black;
      color: #00ffcc;
      font-family: Arial;
      text-align: center;
    }

    .marquee {
      width: 100%;
      overflow: hidden;
      white-space: nowrap;
      box-sizing: border-box;
      font-size: 22px;
      margin: 20px 0;
      color: yellow;
    }

    .marquee span {
      display: inline-block;
      padding-left: 100%;
      animation: scroll 8s linear infinite;
    }

    @keyframes scroll {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    button {
      width: 85%;
      padding: 14px;
      margin: 8px;
      font-size: 18px;
      border-radius: 10px;
      border: none;
      background: #00ffcc;
      color: black;
      font-weight: bold;
    }

    .reset {
      background: red;
      color: white;
    }
  </style>
</head>

<body>

<!-- RUNNING TEXT -->
<div class="marquee">
  <span>YOUR LIFI IS READY &nbsp; YOUR LIFI IS READY &nbsp; YOUR LIFI IS READY</span>
</div>

<!-- RESET -->
<button class="reset" onclick="sendFlash(1)">RESET (1 FLASH)</button>

<button onclick="sendFlash(2)">HI</button>
<button onclick="sendFlash(3)">HELLO</button>
<button onclick="sendFlash(4)">HOW ARE YOU</button>
<button onclick="sendFlash(5)">GOOD</button>
<button onclick="sendFlash(6)">THANK YOU</button>
<button onclick="sendFlash(7)">BYE</button>
<button onclick="sendFlash(8)">ALL NAMES</button>
<button onclick="sendFlash(9)">WELCOME</button>

<script>
let stream;
let track;

async function startFlash() {
  stream = await navigator.mediaDevices.getUserMedia({
    video: { facingMode: "environment" }
  });
  track = stream.getVideoTracks()[0];
}

async function flashOn() {
  await track.applyConstraints({
    advanced: [{ torch: true }]
  });
}

async function flashOff() {
  await track.applyConstraints({
    advanced: [{ torch: false }]
  });
}

async function sendFlash(count) {
  if (!track) await startFlash();

  for (let i = 0; i < count; i++) {
    await flashOn();
    await sleep(120);   // FAST ON
    await flashOff();
    await sleep(120);   // FAST OFF
  }
}

function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}
</script>

</body>
</html>